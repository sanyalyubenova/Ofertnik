# Офертник - Калкулатор за застраховки

Уеб приложение за създаване на оферти за застраховки CASCO, ГО (MTPL) и GAP с калкулатор за премии и управление на тарифи.

## Функционалности

- ✅ Калкулатор за премии за застраховки CASCO, ГО (MTPL) и GAP
- ✅ Управление на тарифи (качване и изтегляне)
- ✅ Модерен, адаптивен интерфейс
- ✅ Работи локално на localhost - не се изисква домейн
- ✅ Лесно за персонализиране и разширяване

## Бърз старт

1. **Инсталирайте зависимостите:**
   ```bash
   npm install
   ```

2. **Стартирайте сървъра:**
   ```bash
   npm start
   ```

3. **Отворете в браузъра:**
   - Приложението ще бъде достъпно на адрес `http://localhost:3000`
   - Терминалът ще покаже точния URL при стартиране на сървъра

## Типове застраховки

### CASCO
- Стойност на превозното средство
- Възраст на превозното средство
- Възраст на водача
- Години без щети
- Франшиза

### ГО (MTPL)
- Тип превозно средство (лека кола, камион, мотоциклет, автобус)
- Обем на двигателя
- Регион (градски, предградие, селски)
- Ниво на покритие (основно, стандартно, премиум)

### GAP
- Стойност на превозното средство
- Размер на кредита
- Срок на кредита
- Ниво на покритие (100%, 125%, 150%)

## Управление на тарифи

### Изтегляне на текущи тарифи
1. Кликнете върху бутона "Изтегли JSON" в секцията за управление на тарифи
2. Файлът `tariffs.json` ще бъде изтеглен на вашия компютър

### Актуализиране на тарифи
1. Подгответе JSON файл с тарифи (можете да изтеглите настоящия като шаблон)
2. Кликнете "Изберете файл с тарифи (JSON)" и изберете вашия файл
3. Кликнете "Заредете тарифи"
4. Новите тарифи ще заменят старите

### Формат на файла с тарифи

JSON файлът трябва да съдържа три секции: `casco`, `mtpl` и `gap`. Примерна структура се намира в `data/tariffs.json`.

## Структура на проекта

```
ofertnik/
├── server.js              # Node.js сървър с API
├── package.json           # Зависимости на проекта
├── data/
│   └── tariffs.json      # Файл с тарифи (създава се автоматично)
├── public/               # Статични файлове
│   ├── index.html        # Главна HTML страница
│   ├── styles.css        # CSS стилове
│   └── script.js         # JavaScript логика
└── README.md             # Този файл
```

## API Endpoints

### GET `/api/tariffs`
Извлича текущите тарифи.

### POST `/api/tariffs/upload`
Качва нови тарифи от JSON файл.

**Request:** `multipart/form-data` с поле `tariffFile`

### POST `/api/tariffs`
Актуализира тарифи от JSON в body на заявката.

**Request Body:**
```json
{
  "casco": { ... },
  "mtpl": { ... },
  "gap": { ... }
}
```

### POST `/api/calculate`
Изчислява премията за застраховка.

**Request Body:**
```json
{
  "insuranceType": "casco",
  "data": {
    "vehicleValue": 50000,
    "vehicleAge": 3,
    ...
  }
}
```

**Response:**
```json
{
  "premium": 1234.56,
  "currency": "BGN"
}
```

## Персонализиране

- Редактирайте `public/index.html` за да промените съдържанието и структурата
- Модифицирайте `public/styles.css` за да промените външния вид
- Актуализирайте `public/script.js` за да добавите функционалност
- Променете порта в `server.js` ако порт 3000 е зает
- Настройте логиката за изчисление във функциите `calculateCascoPremium`, `calculateMTPLPremium`, `calculateGAPPremium` в `server.js`

## Изисквания

- Node.js (версия 14 или по-висока)
- npm (включен в Node.js)

## Лиценз

MIT
